# Обработка ошибок


В Go ошибки часто возвращаются как часть структуры, которая содержит как саму ошибку, так и дополнительную полезную информацию. Это позволяет более гибко обрабатывать ошибки и предоставлять контекст для их анализа.

### Пример:
```go
type Result struct {
    Error    error
    Response *http.Response
}

func checkStatus(done <-chan struct{}, urls ...string) <-chan Result {
    results := make(chan Result)
    go func() {
        defer close(results)
        for _, url := range urls {
            var result Result
            resp, err := http.Get(url)
            result = Result{Error: err, Response: resp}
            select {
            case <-done:
                return
            case results <- result:
            }
        }
    }()
    return results
}
```

### Основные моменты:
1. **Структура `Result`**:
    - Содержит как ошибку, так и полезные данные (например, HTTP-ответ).
    - Позволяет передавать больше информации об ошибке, чем просто `error`.

2. **Канал для результатов**:
    - Результаты передаются через канал, что позволяет обрабатывать их асинхронно.

3. **Обработка отмены**:
    - Используется канал `done` для возможности отмены операции, если она больше не нужна.

### Преимущества:
- **Гибкость**: Возможность возвращать как ошибки, так и полезные данные в одной структуре.
- **Контекст**: Удобно для анализа ошибок, так как можно передавать дополнительную информацию.
- **Асинхронность**: Результаты могут быть обработаны асинхронно через каналы.
