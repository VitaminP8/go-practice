# Паники (panic) в Go

## 1. Что такое паника?
**Паника (panic)** в Go используется для немедленного завершения выполнения программы при критической ошибке. В отличие от обычных ошибок, которые можно вернуть и обработать, паника прерывает нормальный поток выполнения.

Пример паники:
```go
package main

import "fmt"

func main() {
    fmt.Println("Start")
    panic("Что-то пошло не так!")
    fmt.Println("End") // Эта строка не выполнится
}
```
Вывод:
```
Start
panic: Что-то пошло не так!
```

## 2. Использование `recover` для перехвата паники
Чтобы избежать аварийного завершения программы, можно использовать `recover()`, который позволяет обработать панику и продолжить выполнение.

Пример:
```go
package main

import "fmt"

func main() {
    defer func() {
        if r := recover(); r != nil {
            fmt.Println("Паника перехвачена:", r)
        }
    }()
    
    fmt.Println("Перед паникой")
    panic("Ошибка!")
    fmt.Println("После паники") // Эта строка не выполнится
}
```
Вывод:
```
Перед паникой
Паника перехвачена: Ошибка!
```

## 3. Где уместно использовать панику?
Использование `panic` оправдано в следующих случаях:
- Критические ошибки (например, выход за границы массива или повреждение данных)
- Ошибки в коде, которые нельзя обработать нормальным образом
- В библиотеках, если разработчик API хочет указать, что функция была вызвана некорректно

## 4. `panic` и `defer`
Все отложенные (`defer`) функции выполняются даже в случае паники, что позволяет, например, закрыть файлы или освободить ресурсы перед завершением работы.

Пример:
```go
package main

import "fmt"

func main() {
    defer fmt.Println("Этот defer выполнится даже при панике")
    panic("Критическая ошибка")
}
```
Вывод:
```
Этот defer выполнится даже при панике
panic: Критическая ошибка
```

## 5. Итог
- `panic` используется для фатальных ошибок, которые нельзя обработать.
- `recover` позволяет поймать панику и продолжить выполнение.
- `defer` выполняется даже при возникновении паники, что помогает освободить ресурсы.
- Важно использовать `panic` только в крайних случаях, в обычном коде лучше возвращать ошибки (`error`).

